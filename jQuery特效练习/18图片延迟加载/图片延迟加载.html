<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style>
			*{
				margin: 0;
				padding:0;
			}
			img{
				display: block;
				margin: 0 auto;
				margin-bottom: 20px;
			}
		</style>
	</head>
	<body>
		<img src="img/1.jpg" alt="" width="500" />
		<img src="img/2.jpg" alt="" width="500" />
		<img src="img/3.jpg" alt="" width="500" />
		<img src="img/4.jpg" alt="" width="500" />
		<img src="img/5.jpg" alt="" width="500" />
		<img src="img/6.jpg" alt="" width="500" />
		<img src="img/7.jpg" alt="" width="500" />
		<img src="img/8.jpg" alt="" width="500" />
		<img src="img/9.jpg" alt="" width="500" />
		<img src="img/10.jpg" alt="" width="500" />
		<img src="img/11.jpg" alt="" width="500" />
		<img src="img/12.jpg" alt="" width="500" />
		<img src="img/13.jpg" alt="" width="500" />
		<img src="img/14.jpg" alt="" width="500" />
	</body>
	
	<script>
		var imgs = document.getElementsByTagName("img");
		for(var i=0;i<imgs.length;i++){
			imgs[i].dataSrc = imgs[i].src;
			imgs[i].src = "img/loading.jpg";
		}
		
		window.onload =function (){
			var arr = [];
			for(var i=0;i<imgs.length;i++){
				arr[i] = imgs[i];
			}
			showImg();
			window.onscroll = showImg;
			
			function showImg(){
				for(var i=0;i<arr.length;i++){
					var top = getOffsetTop(arr[i]);
					
					var scrollTop = document.documentElement.scrollTop||document.body.scrollTop;
					if(top<scrollTop+getWinWH().height){
						arr[i].src = arr[i].dataSrc;
						arr.slice(i,1);
					}
				}
			}
			
			function getOffsetTop(ele){
				var top = 0;
				while(ele!=null){
					top += ele.offsetTop;
					ele = ele.offsetParent;
				}
				return top;
			}
			
			function getWinWH(){
				var e = window, a="inner";
				if(!("innerWidth" in window)){
					e = document.documentElement||document.body;
					a = "client";
				}
				return {width: e[a+"Width"],height: e[a+"Height"]}
			}
		}
	</script>
</html>
